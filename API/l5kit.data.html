

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>l5kit.data package &mdash; L5Kit 1.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="l5kit.data.proto package" href="l5kit.data.proto.html" />
    <link rel="prev" title="API Reference" href="../api_reference.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> L5Kit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html">ML Prediction, Planning and Simulation for Self-Driving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#examples">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#news">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#installation">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#credits">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#contact">Contact</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">l5kit.data package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="l5kit.data.proto.html">l5kit.data.proto package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#submodules">Submodules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="l5kit.data.combine.html">l5kit.data.combine module</a></li>
<li class="toctree-l4"><a class="reference internal" href="l5kit.data.filter.html">l5kit.data.filter module</a></li>
<li class="toctree-l4"><a class="reference internal" href="l5kit.data.labels.html">l5kit.data.labels module</a></li>
<li class="toctree-l4"><a class="reference internal" href="l5kit.data.local_data_manager.html">l5kit.data.local_data_manager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="l5kit.data.map_api.html">l5kit.data.map_api module</a></li>
<li class="toctree-l4"><a class="reference internal" href="l5kit.data.zarr_dataset.html">l5kit.data.zarr_dataset module</a></li>
<li class="toctree-l4"><a class="reference internal" href="l5kit.data.zarr_utils.html">l5kit.data.zarr_utils module</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="l5kit.dataset.html">l5kit.dataset package</a></li>
<li class="toctree-l2"><a class="reference internal" href="l5kit.evaluation.html">l5kit.evaluation package</a></li>
<li class="toctree-l2"><a class="reference internal" href="l5kit.geometry.html">l5kit.geometry package</a></li>
<li class="toctree-l2"><a class="reference internal" href="l5kit.kinematic.html">l5kit.kinematic package</a></li>
<li class="toctree-l2"><a class="reference internal" href="l5kit.random.html">l5kit.random package</a></li>
<li class="toctree-l2"><a class="reference internal" href="l5kit.sampling.html">l5kit.sampling package</a></li>
<li class="toctree-l2"><a class="reference internal" href="l5kit.visualization.html">l5kit.visualization package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_format.html">Dataset Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coords_systems.html">Coordinate Systems in L5Kit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coords_systems.html#introduction">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coords_systems.html#coordinate-systems">Coordinate Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how_to_contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition.html">Competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition.html#scoring">Scoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition.html#coordinates-system-for-the-competition">Coordinates System for the competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition.html#additional-metrics">Additional Metrics</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">L5Kit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../api_reference.html">API Reference</a> &raquo;</li>
        
      <li>l5kit.data package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/API/l5kit.data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-l5kit.data">
<span id="l5kit-data-package"></span><h1>l5kit.data package<a class="headerlink" href="#module-l5kit.data" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="l5kit.data.ChunkedDataset">
<em class="property">class </em><code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">ChunkedDataset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#l5kit.data.ChunkedDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>ChunkedDataset is a dataset that lives on disk in compressed chunks, it has easy to use data loading and
writing interfaces that involves making numpy-like slices.</p>
<p>Currently only .zarr directory stores are supported (i.e. the data will live in a folder on your
local filesystem called &lt;something&gt;.zarr).</p>
<dl class="py method">
<dt id="l5kit.data.ChunkedDataset.initialize">
<code class="sig-name descname">initialize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'w'</span></em>, <em class="sig-param"><span class="n">num_scenes</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">num_frames</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">num_agents</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">num_tl_faces</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="l5kit.data.zarr_dataset.html#l5kit.data.zarr_dataset.ChunkedDataset" title="l5kit.data.zarr_dataset.ChunkedDataset">l5kit.data.zarr_dataset.ChunkedDataset</a><a class="headerlink" href="#l5kit.data.ChunkedDataset.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes a new zarr dataset, creating the underlying arrays.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mode</strong> (<em>str</em>) – Mode to open dataset in, should be something that supports writing. (default: {“w”})</p></li>
<li><p><strong>num_scenes</strong> (<em>int</em>) – pre-allocate this number of scenes</p></li>
<li><p><strong>num_frames</strong> (<em>int</em>) – pre-allocate this number of frames</p></li>
<li><p><strong>num_agents</strong> (<em>int</em>) – pre-allocate this number of agents</p></li>
<li><p><strong>num_tl_faces</strong> (<em>int</em>) – pre-allocate this number of traffic lights</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.ChunkedDataset.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'r'</span></em>, <em class="sig-param"><span class="n">cached</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">cache_size_bytes</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1000000000</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="l5kit.data.zarr_dataset.html#l5kit.data.zarr_dataset.ChunkedDataset" title="l5kit.data.zarr_dataset.ChunkedDataset">l5kit.data.zarr_dataset.ChunkedDataset</a><a class="headerlink" href="#l5kit.data.ChunkedDataset.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Opens a zarr dataset from disk from the path supplied in the constructor.</p>
<blockquote>
<div><dl class="simple">
<dt>Keyword Arguments:</dt><dd><p>mode (str): Mode to open dataset in, default to read-only (default: {“r”})
cached (bool): Whether to cache files read from disk using a LRU cache. (default: {True})
cache_size_bytes (int): Size of cache in bytes (default: {1e9} (1GB))</p>
</dd>
<dt>Raises:</dt><dd><p>Exception: When any of the expected arrays (frames, agents, scenes) is missing or the store couldn’t be</p>
</dd>
</dl>
</div></blockquote>
<p>opened.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="l5kit.data.DataManager">
<em class="property">class </em><code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">DataManager</code><a class="headerlink" href="#l5kit.data.DataManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<dl class="py method">
<dt id="l5kit.data.DataManager.require">
<em class="property">abstract </em><code class="sig-name descname">require</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#l5kit.data.DataManager.require" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="l5kit.data.LocalDataManager">
<em class="property">class </em><code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">LocalDataManager</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">local_data_folder</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>str<span class="p">, </span>pathlib.Path<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#l5kit.data.LocalDataManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="l5kit.data.local_data_manager.html#l5kit.data.local_data_manager.DataManager" title="l5kit.data.local_data_manager.DataManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">l5kit.data.local_data_manager.DataManager</span></code></a></p>
<p>LocalDataManager allows you to require data to be present in the subpath of a specific folder.</p>
<p>Example:
Your data folder is set to <code class="docutils literal notranslate"><span class="pre">&quot;/tmp/my-data-folder&quot;</span></code>, and you
call <code class="docutils literal notranslate"><span class="pre">local_data_manager.require(&quot;path/to/image.jpg&quot;)</span></code>, it would check if
<code class="docutils literal notranslate"><span class="pre">&quot;/tmp/my-data-folder/path/to/image.jpg&quot;</span></code> exists, and if so return that complete path
(<code class="docutils literal notranslate"><span class="pre">&quot;/tmp/my-data-folder/path/to/image.jpg&quot;</span></code>), otherwise it raises an error.</p>
<dl class="simple">
<dt>In order of precedence, the local data folder is set by</dt><dd><ol class="arabic simple">
<li><p>Passing in the path to the constructor of <code class="docutils literal notranslate"><span class="pre">LocalDataManager</span></code></p></li>
<li><p>Setting the <code class="docutils literal notranslate"><span class="pre">L5KIT_DATA_FOLDER</span></code> environment variable.</p></li>
</ol>
</dd>
</dl>
<dl class="py method">
<dt id="l5kit.data.LocalDataManager.require">
<code class="sig-name descname">require</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#l5kit.data.LocalDataManager.require" title="Permalink to this definition">¶</a></dt>
<dd><p>Require checks whether the file with the given key is present in the local data folder, if it is not it
raises an error. Returns the path to the file otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>) – Path from the data folder where the file or folder should be present.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>str – Filepath including the data folder where required key is present.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="l5kit.data.MapAPI">
<em class="property">class </em><code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">MapAPI</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">protobuf_map_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">world_to_ecef</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span><a class="headerlink" href="#l5kit.data.MapAPI" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt id="l5kit.data.MapAPI.get_bounds">
<code class="sig-name descname">get_bounds</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#l5kit.data.MapAPI.get_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>For each elements of interest returns bounds [[min_x, min_y],[max_x, max_y]] and proto ids
Coords are computed by the MapAPI and, as such, are in the world ref system.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>keys are classes of elements, values are dict with <cite>bounds</cite> and <cite>ids</cite> keys</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.get_color_for_face">
<code class="sig-name descname">get_color_for_face</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">face_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#l5kit.data.MapAPI.get_color_for_face" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility function. It calls <cite>is_traffic_face_color</cite> for a set of colors until it gets an answer.
If no color is found, then <cite>face_id</cite> is not the id of a traffic light face (and we raise ValueError).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>face_id</strong> (<em>str</em>) – the element id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the color as string for this traffic face</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.get_crosswalk_coords">
<code class="sig-name descname">get_crosswalk_coords</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#l5kit.data.MapAPI.get_crosswalk_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Get XYZ coordinates in world ref system for a crosswalk given its id
lru_cached for O(1) access</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>element_id</strong> (<em>str</em>) – crosswalk element id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict with the polygon coordinates as an (Nx3) XYZ array</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.get_lane_as_interpolation">
<code class="sig-name descname">get_lane_as_interpolation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">step</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">method</span><span class="p">:</span> <span class="n"><a class="reference internal" href="l5kit.data.map_api.html#l5kit.data.map_api.InterpolationMethod" title="l5kit.data.map_api.InterpolationMethod">l5kit.data.map_api.InterpolationMethod</a></span></em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#l5kit.data.MapAPI.get_lane_as_interpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an interpolation of the left and right lanes and compute the midlane.
See interpolate for details about the different interpolation methods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>element_id</strong> (<em>str</em>) – lane id</p></li>
<li><p><strong>step</strong> (<em>float</em>) – step param for the method</p></li>
<li><p><strong>method</strong> (<a class="reference internal" href="l5kit.data.map_api.html#l5kit.data.map_api.InterpolationMethod" title="l5kit.data.map_api.InterpolationMethod"><em>InterpolationMethod</em></a>) – one of the accepted methods</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>same as <cite>get_lane_coords</cite> but overwrite xyz values for the lanes</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.get_lane_coords">
<code class="sig-name descname">get_lane_coords</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; dict<a class="headerlink" href="#l5kit.data.MapAPI.get_lane_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Get XYZ coordinates in world ref system for a lane given its id
lru_cached for O(1) access</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>element_id</strong> (<em>str</em>) – lane element id</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a dict with the two boundaries coordinates as (Nx3) XYZ arrays</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.get_lane_traffic_control_ids">
<code class="sig-name descname">get_lane_traffic_control_ids</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; set<a class="headerlink" href="#l5kit.data.MapAPI.get_lane_traffic_control_ids" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.id_as_str">
<em class="property">static </em><code class="sig-name descname">id_as_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element_id</span><span class="p">:</span> <span class="n">road_network_pb2.GlobalId</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#l5kit.data.MapAPI.id_as_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the element id as a string.
Elements ids are stored as a variable len sequence of bytes in the protobuf</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>element_id</strong> (<em>GlobalId</em>) – the GlobalId in the protobuf</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the id as a str</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.interpolate">
<em class="property">static </em><code class="sig-name descname">interpolate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xyz</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">step</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">method</span><span class="p">:</span> <span class="n"><a class="reference internal" href="l5kit.data.map_api.html#l5kit.data.map_api.InterpolationMethod" title="l5kit.data.map_api.InterpolationMethod">l5kit.data.map_api.InterpolationMethod</a></span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#l5kit.data.MapAPI.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate points based on cumulative distances from the first one. Two modes are available:
INTER_METER: interpolate using step as a meter value over cumulative distances (variable len result)
INTER_ENSURE_LEN: interpolate using a variable step such that we always get step values
:param xyz: XYZ coords
:type xyz: np.ndarray
:param step: param for the interpolation
:type step: float
:param method: method to use to interpolate
:type method: InterpolationMethod</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the new interpolated coordinates</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.is_crosswalk">
<em class="property">static </em><code class="sig-name descname">is_crosswalk</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element</span><span class="p">:</span> <span class="n">road_network_pb2.MapElement</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#l5kit.data.MapAPI.is_crosswalk" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether an element is a valid crosswalk</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>element</strong> (<em>MapElement</em>) – a proto element</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the element is a valid crosswalk</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.is_lane">
<em class="property">static </em><code class="sig-name descname">is_lane</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element</span><span class="p">:</span> <span class="n">road_network_pb2.MapElement</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#l5kit.data.MapAPI.is_lane" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether an element is a valid lane</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>element</strong> (<em>MapElement</em>) – a proto element</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the element is a valid lane</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.is_traffic_face_color">
<code class="sig-name descname">is_traffic_face_color</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element_id</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">color</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#l5kit.data.MapAPI.is_traffic_face_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the element is a traffic light face of the given color</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>element_id</strong> (<em>str</em>) – the id (utf-8 encode) of the element</p></li>
<li><p><strong>color</strong> (<em>str</em>) – the color to check</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the element is a traffic light face with the given color</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.is_traffic_light">
<code class="sig-name descname">is_traffic_light</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">element_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#l5kit.data.MapAPI.is_traffic_light" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the element is a traffic light
:param element_id: the id (utf-8 encode) of the element
:type element_id: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the element is a traffic light</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="l5kit.data.MapAPI.unpack_deltas_cm">
<code class="sig-name descname">unpack_deltas_cm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dx</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">dy</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">dz</span><span class="p">:</span> <span class="n">Sequence<span class="p">[</span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">frame</span><span class="p">:</span> <span class="n">road_network_pb2.GeoFrame</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#l5kit.data.MapAPI.unpack_deltas_cm" title="Permalink to this definition">¶</a></dt>
<dd><p>Get coords in world reference system (local ENU-&gt;ECEF-&gt;world).
See the protobuf annotations for additional information about how coordinates are stored</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dx</strong> (<em>Sequence</em><em>[</em><em>int</em><em>]</em>) – X displacement in centimeters in local ENU</p></li>
<li><p><strong>dy</strong> (<em>Sequence</em><em>[</em><em>int</em><em>]</em>) – Y displacement in centimeters in local ENU</p></li>
<li><p><strong>dz</strong> (<em>Sequence</em><em>[</em><em>int</em><em>]</em>) – Z displacement in centimeters in local ENU</p></li>
<li><p><strong>frame</strong> (<em>GeoFrame</em>) – geo-location information for the local ENU. It contains lat and long origin of the frame</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array of shape (Nx3) with XYZ coordinates in world ref system</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="l5kit.data.filter_agents_by_frames">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">filter_agents_by_frames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">frames</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">agents</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>numpy.ndarray<span class="p">]</span><a class="headerlink" href="#l5kit.data.filter_agents_by_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of agents array, one array per frame. Note that “agent_index_interval” is used to filter agents,
so you should take care of re-setting it if you have previously sliced agents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>np.ndarray</em>) – an array of frames</p></li>
<li><p><strong>agents</strong> (<em>np.ndarray</em>) – an array of agents</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List[np.ndarray] with the agents divided by frame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.filter_agents_by_labels">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">filter_agents_by_labels</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agents</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">threshold</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">0.5</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#l5kit.data.filter_agents_by_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters an agents array, keeping those agents that meet the threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agents</strong> (<em>np.ndarray</em>) – Agents array</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><p><strong>threshold</strong> (<em>float</em>) – probability threshold for filtering (default: {0.5})</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>np.ndarray – A subset of input <code class="docutils literal notranslate"><span class="pre">agents</span></code> array.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.filter_agents_by_track_id">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">filter_agents_by_track_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">agents</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">track_id</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#l5kit.data.filter_agents_by_track_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Return all agent object (np.ndarray) of a given track_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agents</strong> (<em>np.ndarray</em>) – agents array.
NOTE: do NOT pass a zarr to this function, it can’t handle boolean indexing</p></li>
<li><p><strong>track_id</strong> (<em>int</em>) – agent track id to select</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>np.ndarray – Selected agent.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.filter_tl_faces_by_frames">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">filter_tl_faces_by_frames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">frames</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">tl_faces</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>numpy.ndarray<span class="p">]</span><a class="headerlink" href="#l5kit.data.filter_tl_faces_by_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of traffic light faces arrays, one array per frame.
This functions mimics <cite>filter_agents_by_frames</cite> for traffic light faces</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frames</strong> (<em>np.ndarray</em>) – an array of frames</p></li>
<li><p><strong>tl_faces</strong> (<em>np.ndarray</em>) – an array of traffic light faces</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List[np.ndarray] with the traffic light faces divided by frame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.filter_tl_faces_by_status">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">filter_tl_faces_by_status</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tl_faces</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">status</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#l5kit.data.filter_tl_faces_by_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Filter tl_faces and keep only active faces
:param tl_faces: array of traffic faces
:type tl_faces: np.ndarray
:param status: status we want to keep TODO refactor for enum
:type status: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>traffic light faces array with only faces with that status</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.get_agents_slice_from_frames">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">get_agents_slice_from_frames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">frame_a</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">frame_b</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>numpy.ndarray<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; slice<a class="headerlink" href="#l5kit.data.get_agents_slice_from_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a slice for indexing agents giving a start and end frame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame_a</strong> (<em>np.ndarray</em>) – the starting frame</p></li>
<li><p><strong>frame_b</strong> (<em>Optional</em><em>[</em><em>np.ndarray</em><em>]</em>) – the ending frame. If None, then frame_a end will be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a slice object starting from the first agent in frame_a to the last one in frame_b</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>slice</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.get_combined_scenes">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">get_combined_scenes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scenes</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="headerlink" href="#l5kit.data.get_combined_scenes" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes as input an np.ndarray or zarr array with scenes, and combines scenes that follow up
eachother perfectly (i.e. from a single recording by the same host). Returns an np.ndarray
of combined scenes.</p>
<blockquote>
<div><dl class="simple">
<dt>Arguments:</dt><dd><p>scenes (np.ndarray): scenes</p>
</dd>
<dt>Returns:</dt><dd><p>np.ndarray – combined scenes where followup scenes have been merged.</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.get_frames_slice_from_scenes">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">get_frames_slice_from_scenes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scene_a</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">scene_b</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>numpy.ndarray<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; slice<a class="headerlink" href="#l5kit.data.get_frames_slice_from_scenes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a slice for indexing frames giving a start and end scene</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scene_a</strong> (<em>np.ndarray</em>) – the starting scene</p></li>
<li><p><strong>scene_b</strong> (<em>Optional</em><em>[</em><em>np.ndarray</em><em>]</em>) – the ending scene. If None, then scene_a end will be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a slice object starting from the first frame in scene_a to the last one in scene_b</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>slice</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.get_tl_faces_slice_from_frames">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">get_tl_faces_slice_from_frames</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">frame_a</span><span class="p">:</span> <span class="n">numpy.ndarray</span></em>, <em class="sig-param"><span class="n">frame_b</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>numpy.ndarray<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; slice<a class="headerlink" href="#l5kit.data.get_tl_faces_slice_from_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a slice for indexing traffic light faces giving a start and end frame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame_a</strong> (<em>np.ndarray</em>) – the starting frame</p></li>
<li><p><strong>frame_b</strong> (<em>Optional</em><em>[</em><em>np.ndarray</em><em>]</em>) – the ending frame. If None, then frame_a end will be used</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a slice object starting from the first tl_face in frame_a to the last one in frame_b</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>slice</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="l5kit.data.zarr_concat">
<code class="sig-prename descclassname">l5kit.data.</code><code class="sig-name descname">zarr_concat</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">input_zarrs</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">output_zarr</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#l5kit.data.zarr_concat" title="Permalink to this definition">¶</a></dt>
<dd><p>Concat many zarr into a single one. Takes care of updating indices for frames and agents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_zarrs</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – a list of paths to input zarrs</p></li>
<li><p><strong>output_zarr</strong> (<em>str</em>) – the path to the output zarr</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="l5kit.data.proto.html">l5kit.data.proto package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="l5kit.data.proto.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="l5kit.data.proto.road_network_pb2.html">l5kit.data.proto.road_network_pb2 module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="l5kit.data.combine.html">l5kit.data.combine module</a></li>
<li class="toctree-l1"><a class="reference internal" href="l5kit.data.filter.html">l5kit.data.filter module</a></li>
<li class="toctree-l1"><a class="reference internal" href="l5kit.data.labels.html">l5kit.data.labels module</a></li>
<li class="toctree-l1"><a class="reference internal" href="l5kit.data.local_data_manager.html">l5kit.data.local_data_manager module</a></li>
<li class="toctree-l1"><a class="reference internal" href="l5kit.data.map_api.html">l5kit.data.map_api module</a></li>
<li class="toctree-l1"><a class="reference internal" href="l5kit.data.zarr_dataset.html">l5kit.data.zarr_dataset module</a></li>
<li class="toctree-l1"><a class="reference internal" href="l5kit.data.zarr_utils.html">l5kit.data.zarr_utils module</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="l5kit.data.proto.html" class="btn btn-neutral float-right" title="l5kit.data.proto package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../api_reference.html" class="btn btn-neutral float-left" title="API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Lyft Level 5

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>